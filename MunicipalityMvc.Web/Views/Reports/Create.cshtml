@{
    ViewData["Title"] = "Report an Issue";
    var categories = ViewBag.Categories as string[] ?? Array.Empty<string>();
}

<div class="container py-4">
    <h2 class="mb-3">Report an Issue</h2>
    <p class="text-muted">Provide details about the issue. Attach images or documents if available.</p>

    <form asp-action="Create" method="post" enctype="multipart/form-data" class="mt-3">
        <div class="mb-3">
            <label for="location" class="form-label">Location</label>
            <input id="location" name="location" class="form-control" required />
        </div>
        <div class="mb-3">
            <label for="category" class="form-label">Category</label>
            <select id="category" name="category" class="form-select">
                @foreach (var c in categories)
                {
                    <option value="@c">@c</option>
                }
            </select>
        </div>
        <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea id="description" name="description" class="form-control" rows="6" required></textarea>
        </div>
        <div class="mb-3">
            <label for="attachments" class="form-label">Attachments</label>
            <input id="attachments" name="attachments" type="file" class="form-control" multiple />
            <div class="form-text">You can select multiple files.</div>
        </div>

        <div class="progress mb-3" role="progressbar" aria-label="Progress">
            <div class="progress-bar" style="width: 100%">Ready to submit</div>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
        <a asp-controller="Home" asp-action="Index" class="btn btn-link">Back to Main Menu</a>
    </form>

    @if (!ViewData.ModelState.IsValid)
    {
        <div class="alert alert-danger mt-3">Please correct the errors and try again.</div>
    }
</div>


